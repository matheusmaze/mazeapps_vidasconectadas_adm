{"version":3,"sources":["webpack:///./src/services/validate.ts","webpack:///./src/views/Login.vue?af3f","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?e63b"],"names":["isEmpty","payload","emptyFields","Object","entries","forEach","element","push","returnMessage","el","isEmail","email","re","test","String","toLowerCase","isBirthday","date","year","Date","getFullYear","yearValidate","split","length","Number","monthValidate","dayValidate","fullDateValidate","birthdayValidate","class","aria-hidden","src","alt","type","user","document","placeholder","label","password","showTip","login","to","name","components","Input","setup","alert","loader","router","validate","value","open","join","replace","data","token","localStorage","setItem","defaults","headers","Authorization","JSON","stringify","info","parse","getItem","nivel","path","close","render"],"mappings":"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","file":"js/chunk-24260b2c.fa464467.js","sourcesContent":["const isEmpty = (payload: object)  => {\r\n    const emptyFields: Array<string | void> = []\r\n    Object.entries(payload).forEach(element => {\r\n        if(element[1] === \"\"){\r\n            emptyFields.push(element[0])\r\n        }\r\n    });\r\n    let returnMessage = \"\"\r\n    emptyFields.forEach(el => {\r\n        el === 'name' ? el = 'Nome' : el;\r\n        el === 'birthday' ? el = 'Data de aniversário' : el;\r\n        el === 'document' ? el = 'CPF ou CNPJ' : el;\r\n        el === 'cpf' ? el = 'CPF' : el;\r\n        el === 'cnpj' ? el = 'CNPJ' : el;\r\n        el === 'phone_number' ? el = 'Whatsapp' : el;\r\n        el === 'email' ? el = 'E-mail' : el;\r\n        el === 'password' ? el = 'Senha' : el;\r\n        el === 'welcome_email' ? el = 'Boas-vindas' : el;\r\n        el === 'blood_donator' ? el = 'Doador de sangue' : el;\r\n        el === 'code' ? el = 'Código' : el;\r\n        el === 'logo' ? el = 'Logotipo' : el;\r\n        el === 'value' || el === 'fixed_value' ? el = 'Valor' : el;\r\n        el === 'description' ? el = 'Descrição' : el;\r\n        el === 'recurrence_day' ? el = 'Dia da doação' : el;\r\n        el === 'recurrence_interval' ? el = 'Recorrência' : el;\r\n        el === 'institutions_id' ? el = 'Instituição' : el;\r\n        el === 'users_id' ? el = 'Comprador' : el;\r\n        el === 'purchase_voucher' ? el = 'Comprovante de compra' : el;\r\n        el === 'created_at' || el === 'updated_at' ? el = 'Data' : el;\r\n\r\n        returnMessage += `* O Campo <b>${el}</b> está vazio <br/>`\r\n    })\r\n    return returnMessage\r\n}\r\n\r\n//isEmail retornará uma string em vez de boolean\r\nconst isEmail = (email: string): string => {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    const test = re.test(String(email).toLowerCase());\r\n    let returnMessage = \"\";\r\n    if(!test){\r\n        returnMessage = '* Email inválido.';\r\n    }\r\n    return returnMessage;\r\n}\r\n\r\nconst isBirthday = (date: string): boolean => {\r\n    const year = new Date().getFullYear();\r\n    let yearValidate = false;\r\n    if(date.split('/')[2] && date.split('/')[2].length === 4) {\r\n        if (Number(date.split('/')[2]) > (year - 110) && Number(date.split('/')[2]) <= year) {\r\n            yearValidate = true;\r\n        }\r\n    }\r\n    const monthValidate = Number(date.split('/')[1]) <= 12;\r\n    const dayValidate = Number(date.split('/')[0]) <= 31;\r\n    const fullDateValidate = date.length === 10 ? true : false;\r\n    const birthdayValidate = (yearValidate && monthValidate && dayValidate && fullDateValidate) ? true : false;\r\n    return birthdayValidate;\r\n}\r\n\r\n\r\n\r\nexport { isEmpty, isEmail, isBirthday }","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=65f82c24&lang=css\"","<template>\r\n  <div class=\"flex items-center min-h-screen p-6 bg-quaternary dark:bg-gray-900\">\r\n    <div\r\n      class=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\"\r\n    >\r\n      <div class=\"flex flex-col overflow-y-auto md:flex-row\">\r\n        <div class=\"h-32 md:h-auto md:w-1/2\">\r\n          <img\r\n            aria-hidden=\"true\"\r\n            class=\"object-cover w-full h-full dark:hidden\"\r\n            src=\"favicon.ico\"\r\n            alt=\"Office\"\r\n          />\r\n        </div>\r\n        <div class=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\r\n          <div class=\"w-full\">\r\n            <h1\r\n              class=\"vidasConectadas_title mb-4 text-xl font-regular text-gray-700 dark:text-gray-200\"\r\n            >\r\n              Bem vindo ao\r\n              <strong class=\"text-ternary\">Vidas Conectadas</strong>\r\n              <!-- <p class=\"text-sm text-gray-400 opacity-80\">\r\n                Adminstrativo\r\n              </p> -->\r\n            </h1>\r\n            <div class=\"mb-5 mt-10\">\r\n              <Input\r\n                type=\"cpf_cnpj\"\r\n                v-model=\"user.document\"\r\n                placeholder=\"CPF / CNPJ\"\r\n                label=\"CPF / CNPJ\"\r\n              />\r\n            </div>\r\n\r\n            <Input\r\n              v-model=\"user.password\"\r\n              type=\"password\"\r\n              :showTip=\"false\"\r\n              placeholder=\"*******\"\r\n              label=\"Senha\"\r\n            />\r\n\r\n            <!-- You should use a button here, as the anchor is only used for the example  -->\r\n            <a\r\n              @click=\"login\"\r\n              class=\"block cursor-pointer w-full px-5 py-4 mt-10 text-sm font-medium leading-5 text-center text-white rounded-lg transition-colors duration-150 bg-ternary border border-transparent active:bg-purple-600 hover:bg-ternary focus:outline-none focus:shadow-outline-purple\"\r\n            >\r\n              Entrar\r\n            </a>\r\n\r\n            <p class=\" text-center mt-10\">\r\n              <router-link\r\n                class=\"text-sm  font-medium text-ternary dark:text-purple-400 hover:underline\"\r\n                to=\"/redefinir-senha\"\r\n              >\r\n                Esqueceu sua senha?\r\n              </router-link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { inject, onMounted, ref } from \"vue\";\r\nimport Input from \"../components/Elements/Input\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { LOGIN, instance, POST } from \"../services/api\";\r\nimport { isEmpty } from \"../services/validate\";\r\nimport { decodeJwt } from \"../services/util\";\r\nexport default {\r\n  name: \"Login\",\r\n  components: {\r\n    Input,\r\n  },\r\n  setup() {\r\n    const user = ref({\r\n      document: \"\",\r\n      password: \"\",\r\n    });\r\n\r\n    const alert = inject(\"alert\");\r\n    const loader = inject(\"loading\");\r\n    const router = useRouter();\r\n\r\n    // onMounted(() => {\r\n    //   const isAuth = localStorage.getItem(\"token\") ? true : false;\r\n    //   if (isAuth) {\r\n    //     router.push({ path: \"/\" });\r\n    //   }\r\n    // });\r\n\r\n    const login = async () => {\r\n      const validate = isEmpty(user.value);\r\n\r\n      if (validate) {\r\n        alert.open(\"Atenção!\", validate, \"warning\");\r\n      } else {\r\n        loader.open();\r\n        try {\r\n        user.value.document.length > 14\r\n          ? user.value.document = user.value.document.split('.').join('').replace('/', '').replace('-', '')\r\n          : user.value.document = user.value.document.split('.').join('').replace('-', '');\r\n          const data = await POST(\"login\", user.value);\r\n          const token = data.token;\r\n          localStorage.setItem(\"t_vidas\", token);\r\n          instance.defaults.headers.Authorization = token\r\n            ? `Bearer ${token}`\r\n            : \"\";\r\n          localStorage.setItem(\"info_vidas\", JSON.stringify(decodeJwt(token)));\r\n          //Definindo as rotas de acordo com o id do login realizado\r\n          const info = JSON.parse(localStorage.getItem(\"info_vidas\"));\r\n          switch (info.nivel) {\r\n            case 'MASTER':\r\n              router.push({ path: \"/adm\" });\r\n              break;\r\n            case 'NEGOCIADOR':\r\n              router.push({ path: \"/comprador\" });\r\n              break;\r\n            case 'PADRINHO':\r\n              router.push({ path: \"/\" });\r\n              break;\r\n            default:\r\n              //redirecionando para página login caso o login não tenha sido realizado\r\n              router.push({path: \"/login\"});\r\n              break;\r\n          }\r\n          loader.close();\r\n        } catch (e) {\r\n          alert.open(\"Atenção!\", e, \"warning\");\r\n          loader.close();\r\n        }\r\n      }\r\n    };\r\n\r\n    return { login, user };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n  .vidasConectadas_title{\r\n    text-align: center;\r\n  }\r\n\r\n  @media only screen and (min-width: 768px) {\r\n\r\n      .vidasConectadas_title{\r\n        text-align: left;\r\n      }\r\n  }\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=65f82c24\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=65f82c24&lang=css\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}