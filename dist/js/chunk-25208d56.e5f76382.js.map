{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./src/views/Adm/Instituicoes/index.vue","webpack:///./src/views/Adm/Instituicoes/index.vue?06df"],"names":["$","$filter","filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","this","arguments","length","undefined","class","to","route","path","color","text","headers","data","options","name","components","DataTable","Button","setup","key","value","cnpj","router","modal","alert","loader","open","close","includes","localStorage","removeItem","push","deleteItem","user","deleteFunction","id","item","cancelFunction","title","message","confirmMessage","callbackOK","callbackCancel","show","r","icon","action","param","render"],"mappings":"kHACA,IAAIA,EAAI,EAAQ,QACZC,EAAU,EAAQ,QAAgCC,OAClDC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,UAKvDH,EAAE,CAAEK,OAAQ,QAASC,OAAO,EAAMC,QAASH,GAAuB,CAChEF,OAAQ,SAAgBM,GACtB,OAAOP,EAAQQ,KAAMD,EAAYE,UAAUC,OAAS,EAAID,UAAU,QAAKE,O,2DCXzE,eAMM,OANDC,MAAM,aAAW,CACpB,eAA6D,MAAzDA,MAAM,0BAAyB,yBACnC,eAGO,QAHDA,MAAM,yBACT,uG,MAIAA,MAAM,gC,GAQNA,MAAM,Q,yKAfX,EAOA,eAOM,MAPN,EAOM,CANJ,eAKc,GALAC,GAAE,UAAK,EAAAC,MAAMC,KAAX,W,yBACd,iBAGE,CAHF,eAGE,GAFAC,MAAM,UACLC,KAAI,0B,iBAIX,eAOM,MAPN,EAOM,CANJ,eAKE,GAJCC,QAAS,EAAAA,QACTC,KAAM,EAAAA,KACNC,QAAS,EAAAA,QACVJ,MAAM,W,gKAYG,GACbK,KAAM,eACNC,WAAY,CACVC,UAAA,OACAC,SAAA,MAEFC,MANa,WAOX,IAAMP,EAAU,CACd,CAAEQ,IAAK,KAAMC,MAAO,MACpB,CAAED,IAAK,OAAQC,MAAO,QACtB,CAAED,IAAK,OAAQC,MAAO,OAAQC,MAAM,GACpC,CAAEF,IAAK,UAAWC,MAAO,SACzB,CAAED,IAAK,SAAUC,MAAO,KAGpBb,EAAQ,iBACRe,EAAS,iBACTC,EAAQ,eAAO,SACfC,EAAQ,eAAO,SACfC,EAAS,eAAO,WAChBb,EAAO,eAAI,IAEjB,eAAS,wCAAC,8GAENa,EAAOC,OAFD,SAGa,eAAI,gBAHjB,OAGNd,EAAKQ,MAHC,OAINK,EAAOE,QAJD,mDAMNF,EAAOE,QACJ,KAAEC,SAAS,UACZJ,EAAME,KAAK,WAAX,KAA0B,UAC1BG,aAAaC,WAAW,SACxBD,aAAaC,WAAW,QACxBR,EAAOS,KAAK,WAEZP,EAAME,KAAK,WAAX,KAA0B,UAbtB,0DAkBV,IAAMM,EAAa,SAACC,GAClB,IAAMC,EAAa,yDAAI,8GAEnBT,EAAOC,OAFY,SAGb,eAAO,gBAAD,OAAiBO,EAAKE,KAHf,OAInBvB,EAAKQ,MAAQR,EAAKQ,MAAM1B,QAAO,SAAC0C,GAAD,OAAUA,EAAKD,IAAMF,EAAKE,MACzDV,EAAOE,QACPH,EAAME,KACJ,WADF,oCAGE,WATiB,mDAYnBD,EAAOE,QACPH,EAAME,KAAK,OAAX,KAAsB,UAbH,yDAAJ,qDAiBbW,EAAiB,WACrBd,EAAMI,SAERJ,EAAMG,KAAK,CACTY,MAAO,UACPC,QAAS,6CACTC,eAAgB,MAChBC,WAAY,kBAAMP,KAClBQ,eAAgB,kBAAML,OAExBZ,EAAOE,SAGHgB,EAAO,SAACC,GACZtB,EAAOS,KAAP,UAAexB,EAAMC,KAArB,mBAAoCoC,EAAET,MAGlCtB,EAAU,CACd,CAAEgC,KAAM,MAAOC,OAAQ,SAACC,GAAD,OAAWJ,EAAKI,IAAQT,MAAO,sBACtD,CAAEO,KAAM,QAASC,OAAQ,SAACC,GAAD,OAAWf,EAAWe,IAAQT,MAAO,wBAGhE,MAAO,CAAE3B,UAASC,OAAMC,UAASN,WC9GrC,EAAOyC,OAASA,EAED","file":"js/chunk-25208d56.e5f76382.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\r\n  <div class=\"mt-6 mb-8\">\r\n    <h3 class=\"font-bold text-primary\">Lista de Instituições</h3>\r\n    <span class=\"text-sm text-gray-500\"\r\n      >Aqui você pode observar todos os itens relacionados às instituições como\r\n      suas respectivas ações.\r\n    </span>\r\n  </div>\r\n  <div class=\"flex mb-6 justify-end w-full\">\r\n    <router-link :to=\"`${route.path}/criar`\">\r\n      <Button\r\n        color=\"primary\"\r\n        :text=\"`Criar Instituição`\"\r\n      />\r\n    </router-link>\r\n  </div>\r\n  <div class=\"card\">\r\n    <DataTable\r\n      :headers=\"headers\"\r\n      :data=\"data\"\r\n      :options=\"options\"\r\n      color=\"primary\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DataTable from \"../../../components/Elements/Datatable.vue\";\r\nimport Button from \"../../../components/Elements/Button.vue\";\r\nimport { inject, onMounted, ref } from \"vue\";\r\nimport { GET, DELETE } from \"../../../services/api\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"institutions\",\r\n  components: {\r\n    DataTable,\r\n    Button,\r\n  },\r\n  setup() {\r\n    const headers = [\r\n      { key: \"ID\", value: \"id\"},\r\n      { key: \"Nome\", value: \"name\"},\r\n      { key: \"CNPJ\", value: \"cnpj\", cnpj: true},\r\n      { key: \"Contato\", value: \"email\"},\r\n      { key: \"Opções\", value: \"\"},\r\n    ];\r\n\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const modal = inject(\"modal\");\r\n    const alert = inject(\"alert\");\r\n    const loader = inject(\"loading\");\r\n    const data = ref([]);\r\n\r\n    onMounted(async () => {\r\n      try {\r\n        loader.open();\r\n        data.value = await GET(\"institutions\");\r\n        loader.close();\r\n      } catch (e) {\r\n        loader.close();\r\n        if(e.includes(\"Token\")) {\r\n          alert.open(\"Atenção!\", e, \"danger\");\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('info');\r\n          router.push('/login');\r\n        } else {\r\n          alert.open(\"Atenção!\", e, \"danger\");\r\n        }\r\n      }\r\n    });\r\n\r\n    const deleteItem = (user) => {\r\n      const deleteFunction = async function() {\r\n        try {\r\n          loader.open();\r\n          await DELETE(`institutions/${user.id}`);\r\n          data.value = data.value.filter((item) => item.id != user.id);\r\n          loader.close();\r\n          alert.open(\r\n            \"Sucesso!\",\r\n            `Instituição deletada com sucesso!`,\r\n            \"success\"\r\n          );\r\n        } catch (e) {\r\n          loader.close();\r\n          alert.open(\"Erro\", e, \"danger\");\r\n        }\r\n      };\r\n\r\n      const cancelFunction = () => {\r\n        modal.close();\r\n      };\r\n      modal.open({\r\n        title: \"Atenção\",\r\n        message: \"Deseja realmente excluir essa instituição?\",\r\n        confirmMessage: \"Sim\",\r\n        callbackOK: () => deleteFunction(),\r\n        callbackCancel: () => cancelFunction(),\r\n      });\r\n      loader.close();\r\n    };\r\n\r\n    const show = (r) => {\r\n      router.push(`${route.path}/editar/${r.id}`);\r\n    };\r\n\r\n    const options = [\r\n      { icon: \"pen\", action: (param) => show(param), title: 'Editar instituição' },\r\n      { icon: \"trash\", action: (param) => deleteItem(param), title: 'Excluir instituição' },\r\n    ];\r\n\r\n    return { headers, data, options, route };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=3af01629\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}