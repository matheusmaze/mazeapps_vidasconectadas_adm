{"version":3,"sources":["webpack:///./src/views/Padrinhos/Doacoes/index.vue","webpack:///./src/views/Padrinhos/Doacoes/index.vue?3692"],"names":["class","to","route","path","color","text","headers","data","options","exports","name","components","DataTable","Button","setup","key","value","date","money","badge","router","modal","alert","loader","status","info","JSON","parse","localStorage","getItem","open","id","map","donation","close","includes","removeItem","push","deleteItem","deleteFunction","cancelFunction","title","message","confirmMessage","callbackOK","callbackCancel","show","window","icon","action","param","render"],"mappings":"2IACE,eAMM,OANDA,MAAM,QAAM,CACf,eAAsD,MAAlDA,MAAM,0BAAyB,kBACnC,eAGO,QAHDA,MAAM,yBACT,kG,MAKAA,MAAM,yB,GAMNA,MAAM,a,yKAdX,EAQA,eAIQ,MAJR,EAIQ,CAHJ,eAEc,GAFAC,GAAE,UAAK,EAAAC,MAAMC,KAAX,W,yBACd,iBAAiD,CAAjD,eAAiD,GAAzCC,MAAM,UAAWC,KAAI,qB,iBAInC,eAQM,MARN,EAQM,CAPJ,eAME,GALCC,QAAS,EAAAA,QACTC,KAAM,EAAAA,KACNC,QAAS,EAAAA,QACVJ,MAAM,UACLK,SAAS,G,sJAYD,GACbC,KAAM,QACNC,WAAY,CACVC,UAAA,OACAC,SAAA,MAEFC,MANa,WAOX,IAAMR,EAAU,CACd,CAAES,IAAK,KAAMC,MAAO,MACpB,CAAED,IAAK,OAAQC,MAAO,aAAcC,MAAM,GAC1C,CAAEF,IAAK,QAASC,MAAO,cAAeE,OAAO,GAC7C,CAAEH,IAAK,OAAQC,MAAO,uBACtB,CACED,IAAK,SACLC,MAAO,SACPG,MAAO,CACL,MAAS,QACT,QAAW,QAGf,CAAEJ,IAAK,SAAUC,MAAO,KAGpBd,EAAQ,iBACRkB,EAAS,iBACTC,EAAQ,eAAO,SACfC,EAAQ,eAAO,SACfC,EAAS,eAAO,WAChBhB,EAAO,eAAI,IACXiB,EAAS,eAAI,IACbC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,eAE7C,eAAS,wCAAC,8GAENN,EAAOO,OAFD,SAGa,eAAI,mBAAD,OAAoBL,EAAKM,KAHzC,OAGNxB,EAAKS,MAHC,OAINT,EAAKS,MAAMgB,KAAI,SAACC,GACQ,WAApBA,EAAST,OAAsBS,EAAST,OAAS,QAAUS,EAAST,OAAS,aAGjFD,EAAOW,QARD,mDAUNX,EAAOW,QACJ,KAAEC,SAAS,UACZb,EAAMQ,KAAK,WAAX,KAA0B,UAC1BF,aAAaQ,WAAW,SACxBR,aAAaQ,WAAW,QACxBhB,EAAOiB,KAAK,WAEZf,EAAMQ,KAAK,WAAX,KAA0B,UAjBtB,0DAsBV,IAAMQ,EAAa,SAACL,GAClB,IAAMM,EAAa,yDAAI,qGACrBhB,EAAOO,OADc,kBAGb,eAAO,aAAD,OAAcG,EAASF,KAHhB,uBAIA,eAAI,mBAAD,OAAoBN,EAAKM,KAJ5B,OAInBxB,EAAKS,MAJc,OAKnBT,EAAKS,MAAMgB,KAAI,SAACC,GACQ,WAApBA,EAAST,OAAsBS,EAAST,OAAS,QAAUS,EAAST,OAAS,aAEjFD,EAAOW,QACPZ,EAAMQ,KAAK,WAAX,iCAAyD,WATtC,qDAWnBP,EAAOW,QACPZ,EAAMQ,KAAK,OAAX,KAAsB,UAZH,0DAAJ,qDAgBbU,EAAiB,WACrBnB,EAAMa,SAGRb,EAAMS,KAAK,CACTW,MAAO,UACPC,QAAS,0CACTC,eAAgB,MAChBC,WAAY,kBAAML,KAClBM,eAAgB,kBAAML,OAGxBjB,EAAOW,SAGHY,EAAO,SAACb,GACZc,OAAOjB,KAAP,0BAA+BG,EAASF,MAOpCvB,EAAU,CAEd,CAAEwC,KAAM,MAAOC,OAAQ,SAACC,GAAD,OAAWJ,EAAKI,IAAQT,MAAO,iBACtD,CAAEO,KAAM,QAASC,OAAQ,SAACC,GAAD,OAAWZ,EAAWY,IAAQT,MAAO,qBAGhE,MAAO,CACLnC,UACAC,OACAC,UACAN,QACAsB,YCvIN,EAAO2B,OAASA,EAED","file":"js/chunk-2d0e1d76.d236995e.js","sourcesContent":["<template>\r\n  <div class=\"my-6\">\r\n    <h3 class=\"font-bold text-primary\">Minhas Doações</h3>\r\n    <span class=\"text-sm text-gray-500\"\r\n      >Aqui você pode observar todos os itens relacionados às doações como\r\n      suas respectivas ações.\r\n    </span>\r\n  </div>\r\n\r\n  <div class=\"flex justify-end mt-5\">\r\n      <router-link :to=\"`${route.path}/criar`\">\r\n        <Button color=\"primary\" :text=\"`Criar Doação`\" />\r\n      </router-link>\r\n    </div>\r\n\r\n  <div class=\"card my-8\">\r\n    <DataTable\r\n      :headers=\"headers\"\r\n      :data=\"data\"\r\n      :options=\"options\"\r\n      color=\"primary\"\r\n      :exports=\"true\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DataTable from \"../../../components/Elements/Datatable.vue\";\r\nimport Button from \"../../../components/Elements/Button.vue\";\r\nimport { inject, onMounted, ref } from \"vue\";\r\nimport { GET, DELETE } from \"../../../services/api\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"users\",\r\n  components: {\r\n    DataTable,\r\n    Button, \r\n  },\r\n  setup() {\r\n    const headers = [\r\n      { key: \"ID\", value: \"id\" },\r\n      { key: \"Data\", value: \"created_at\", date: true },\r\n      { key: \"Valor\", value: \"fixed_value\", money: true },\r\n      { key: \"Tipo\", value: \"recurrence_interval\"},\r\n      { \r\n        key: \"Status\", \r\n        value: \"status\", \r\n        badge: { \r\n          \"Ativa\": \"green\", \r\n          \"Inativa\": \"red\",\r\n        } \r\n      },\r\n      { key: \"Opções\", value: \"\" },\r\n    ];\r\n\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const modal = inject(\"modal\");\r\n    const alert = inject(\"alert\");\r\n    const loader = inject(\"loading\");\r\n    const data = ref([]);\r\n    const status = ref([]);\r\n    const info = JSON.parse(localStorage.getItem(\"info_vidas\"));\r\n\r\n    onMounted(async () => {\r\n      try {\r\n        loader.open();\r\n        data.value = await GET(`donations/users/${info.id}`);\r\n        data.value.map((donation) => {\r\n            donation.status === 'ACTIVE' ? donation.status = 'Ativa' : donation.status = 'Inativa';\r\n        });\r\n        \r\n        loader.close();\r\n      } catch (e) {\r\n        loader.close();\r\n        if(e.includes(\"Token\")) {\r\n          alert.open(\"Atenção!\", e, \"danger\");\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('info');\r\n          router.push('/login');\r\n        } else {\r\n          alert.open(\"Atenção!\", e, \"danger\");\r\n        }\r\n      }\r\n    });\r\n\r\n    const deleteItem = (donation) => {\r\n      const deleteFunction = async function() {\r\n        loader.open();\r\n        try {\r\n          await DELETE(`donations/${donation.id}`);\r\n          data.value = await GET(`donations/users/${info.id}`);\r\n          data.value.map((donation) => {\r\n              donation.status === 'ACTIVE' ? donation.status = 'Ativa' : donation.status = 'Inativa';\r\n          });\r\n          loader.close();\r\n          alert.open(\"Sucesso!\", `Doação desativada com sucesso!`, \"success\");\r\n        } catch (e) {\r\n          loader.close();\r\n          alert.open(\"Erro\", e, \"danger\");\r\n        }\r\n      };\r\n\r\n      const cancelFunction = () => {\r\n        modal.close();\r\n      };\r\n\r\n      modal.open({\r\n        title: \"Atenção\",\r\n        message: \"Deseja realmente desativar essa doação?\",\r\n        confirmMessage: \"Sim\",\r\n        callbackOK: () => deleteFunction(),\r\n        callbackCancel: () => cancelFunction(),\r\n      });\r\n\r\n      loader.close();\r\n    };\r\n\r\n    const show = (donation) => {\r\n      window.open(`/doacoes/editar/${donation.id}`);\r\n    };\r\n\r\n    // const push = (r) => {\r\n    //   window.open(`/adm/doadores/detalhes/${r.users_id}`);\r\n    // };\r\n\r\n    const options = [\r\n      // { icon: \"user\", action: (param) => push(param), title: 'Detalhes do doador' },\r\n      { icon: \"pen\", action: (param) => show(param), title: 'Editar doação' },\r\n      { icon: \"trash\", action: (param) => deleteItem(param), title: 'Desativar doação' },\r\n    ];\r\n\r\n    return {\r\n      headers,\r\n      data,\r\n      options,\r\n      route,\r\n      status,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=db92b5c6\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}