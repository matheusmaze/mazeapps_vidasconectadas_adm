{"version":3,"sources":["webpack:///./src/views/Padrinhos/Doadores/index.vue","webpack:///./src/views/Padrinhos/Doadores/index.vue?1cf9","webpack:///./node_modules/core-js/modules/es.array.filter.js"],"names":["class","to","route","path","color","text","headers","data","options","name","components","DataTable","Button","setup","key","value","document","router","modal","alert","loader","open","info","JSON","parse","localStorage","getItem","id","close","includes","removeItem","push","deleteItem","user","deleteFunction","filter","item","cancelFunction","title","message","confirmMessage","callbackOK","callbackCancel","show","r","window","icon","action","param","render","$","$filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","this","arguments","length","undefined"],"mappings":"2IACE,eAMM,OANDA,MAAM,aAAW,CACpB,eAAyD,MAArDA,MAAM,0BAAyB,qBACnC,eAGO,QAHDA,MAAM,yBACT,oG,MAIAA,MAAM,gC,GAQNA,MAAM,Q,yKAfX,EAOA,eAOM,MAPN,EAOM,CANJ,eAKc,GALAC,GAAE,UAAK,EAAAC,MAAMC,KAAX,W,yBACd,iBAGE,CAHF,eAGE,GAFAC,MAAM,UACLC,KAAI,iB,iBAIX,eAOM,MAPN,EAOM,CANJ,eAKE,GAJCC,QAAS,EAAAA,QACTC,KAAM,EAAAA,KACNC,QAAS,EAAAA,QACVJ,MAAM,W,gKAYG,GACbK,KAAM,eACNC,WAAY,CACVC,UAAA,OACAC,SAAA,MAEFC,MANa,WAOX,IAAMP,EAAU,CACd,CAAEQ,IAAK,KAAMC,MAAO,MACpB,CAAED,IAAK,OAAQC,MAAO,QACtB,CAAED,IAAK,YAAaC,MAAO,WAAYC,UAAU,GACjD,CAAEF,IAAK,UAAWC,MAAO,SACzB,CAAED,IAAK,SAAUC,MAAO,KAGpBb,EAAQ,iBACRe,EAAS,iBACTC,EAAQ,eAAO,SACfC,EAAQ,eAAO,SACfC,EAAS,eAAO,WAChBb,EAAO,eAAI,IAEjB,eAAS,wCAAC,oHAENa,EAAOC,OACDC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,eAHvC,SAIa,eAAI,eAAD,OAAgBJ,EAAKK,KAJrC,OAINpB,EAAKQ,MAJC,OAKNK,EAAOQ,QALD,mDAONR,EAAOQ,QACJ,KAAEC,SAAS,UACZV,EAAME,KAAK,WAAX,KAA0B,UAC1BI,aAAaK,WAAW,SACxBL,aAAaK,WAAW,QACxBb,EAAOc,KAAK,WAEZZ,EAAME,KAAK,WAAX,KAA0B,UAdtB,0DAmBV,IAAMW,EAAa,SAACC,GAClB,IAAMC,EAAa,yDAAI,8GAEnBd,EAAOC,OAFY,SAGb,eAAO,SAAD,OAAUY,EAAKN,KAHR,OAInBpB,EAAKQ,MAAQR,EAAKQ,MAAMoB,QAAO,SAACC,GAAD,OAAUA,EAAKT,IAAMM,EAAKN,MACzDP,EAAOQ,QACPT,EAAME,KACJ,WADF,+BAGE,WATiB,mDAYnBD,EAAOQ,QACPT,EAAME,KAAK,OAAX,KAAsB,UAbH,yDAAJ,qDAiBbgB,EAAiB,WACrBnB,EAAMU,SAERV,EAAMG,KAAK,CACTiB,MAAO,UACPC,QAAS,wCACTC,eAAgB,MAChBC,WAAY,kBAAMP,KAClBQ,eAAgB,kBAAML,OAExBjB,EAAOQ,SAGHe,EAAO,SAACC,GACZC,OAAOxB,KAAP,UAAenB,EAAMC,KAArB,qBAAsCyC,EAAEjB,MAGpCnB,EAAU,CACd,CAAEsC,KAAM,MAAOC,OAAQ,SAACC,GAAD,OAAWL,EAAKK,IAAQV,MAAO,sBACtD,CAAEQ,KAAM,QAASC,OAAQ,SAACC,GAAD,OAAWhB,EAAWgB,IAAQV,MAAO,mBAGhE,MAAO,CAAEhC,UAASC,OAAMC,UAASN,WC/GrC,EAAO+C,OAASA,EAED,gB,oCCJf,IAAIC,EAAI,EAAQ,QACZC,EAAU,EAAQ,QAAgChB,OAClDiB,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,UAKvDF,EAAE,CAAEI,OAAQ,QAASC,OAAO,EAAMC,QAASH,GAAuB,CAChElB,OAAQ,SAAgBsB,GACtB,OAAON,EAAQO,KAAMD,EAAYE,UAAUC,OAAS,EAAID,UAAU,QAAKE","file":"js/chunk-551eeec4.aba25fae.js","sourcesContent":["<template>\r\n  <div class=\"mt-6 mb-8\">\r\n    <h3 class=\"font-bold text-primary\">Lista de Doadores</h3>\r\n    <span class=\"text-sm text-gray-500\"\r\n      >Aqui você pode observar todos os itens relacionados aos doadores como\r\n      suas respectivas ações.\r\n    </span>\r\n  </div>\r\n  <div class=\"flex mb-6 justify-end w-full\">\r\n    <router-link :to=\"`${route.path}/criar`\">\r\n      <Button\r\n        color=\"primary\"\r\n        :text=\"`Convidar`\"\r\n      />\r\n    </router-link>\r\n  </div>\r\n  <div class=\"card\">\r\n    <DataTable\r\n      :headers=\"headers\"\r\n      :data=\"data\"\r\n      :options=\"options\"\r\n      color=\"primary\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DataTable from \"../../../components/Elements/Datatable.vue\";\r\nimport Button from \"../../../components/Elements/Button.vue\";\r\nimport { inject, onMounted, ref } from \"vue\";\r\nimport { GET, DELETE } from \"../../../services/api\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"institutions\",\r\n  components: {\r\n    DataTable,\r\n    Button,\r\n  },\r\n  setup() {\r\n    const headers = [\r\n      { key: \"ID\", value: \"id\"},\r\n      { key: \"Nome\", value: \"name\"},\r\n      { key: \"Documento\", value: \"document\", document: true},\r\n      { key: \"Contato\", value: \"email\"},\r\n      { key: \"Opções\", value: \"\"},\r\n    ];\r\n\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const modal = inject(\"modal\");\r\n    const alert = inject(\"alert\");\r\n    const loader = inject(\"loading\");\r\n    const data = ref([]);\r\n\r\n    onMounted(async () => {\r\n      try {\r\n        loader.open();\r\n        const info = JSON.parse(localStorage.getItem(\"info_vidas\"));\r\n        data.value = await GET(`users/users/${info.id}`);\r\n        loader.close();\r\n      } catch (e) {\r\n        loader.close();\r\n        if(e.includes(\"Token\")) {\r\n          alert.open(\"Atenção!\", e, \"danger\");\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('info');\r\n          router.push('/login');\r\n        } else {\r\n          alert.open(\"Atenção!\", e, \"danger\");\r\n        }\r\n      }\r\n    });\r\n\r\n    const deleteItem = (user) => {\r\n      const deleteFunction = async function() {\r\n        try {\r\n          loader.open();\r\n          await DELETE(`users/${user.id}`);\r\n          data.value = data.value.filter((item) => item.id != user.id);\r\n          loader.close();\r\n          alert.open(\r\n            \"Sucesso!\",\r\n            `Doador deletado com sucesso!`,\r\n            \"success\"\r\n          );\r\n        } catch (e) {\r\n          loader.close();\r\n          alert.open(\"Erro\", e, \"danger\");\r\n        }\r\n      };\r\n\r\n      const cancelFunction = () => {\r\n        modal.close();\r\n      };\r\n      modal.open({\r\n        title: \"Atenção\",\r\n        message: \"Deseja realmente excluir esse doador?\",\r\n        confirmMessage: \"Sim\",\r\n        callbackOK: () => deleteFunction(),\r\n        callbackCancel: () => cancelFunction(),\r\n      });\r\n      loader.close();\r\n    };\r\n\r\n    const show = (r) => {\r\n      window.open(`${route.path}/detalhes/${r.id}`);\r\n    };\r\n\r\n    const options = [\r\n      { icon: \"pen\", action: (param) => show(param), title: 'Detalhes do doador' },\r\n      { icon: \"trash\", action: (param) => deleteItem(param), title: 'Excluir doador' },\r\n    ];\r\n\r\n    return { headers, data, options, route };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=65727289\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}