{"version":3,"sources":["webpack:///./src/views/Adm/Doacoes/index.vue","webpack:///./src/views/Adm/Doacoes/index.vue?f2f1","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"names":["class","headers","data","options","color","exports","name","components","DataTable","setup","key","value","document","date","money","badge","route","router","modal","alert","loader","totalInfos","status","filtro","open","map","donation","users","username","close","includes","localStorage","removeItem","push","deleteItem","deleteFunction","id","cancelFunction","title","message","confirmMessage","callbackOK","callbackCancel","show","window","r","users_id","icon","action","param","render","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable"],"mappings":"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","file":"js/chunk-d6c84ba0.540f8d74.js","sourcesContent":["<template>\r\n  <div class=\"my-6\">\r\n    <h3 class=\"font-bold text-primary\">Lista de Doações</h3>\r\n    <span class=\"text-sm text-gray-500\"\r\n      >Aqui você pode observar todos os itens relacionados às doações como\r\n      suas respectivas ações.\r\n    </span>\r\n  </div>\r\n\r\n  <div class=\"card my-8\">\r\n    <DataTable\r\n      :headers=\"headers\"\r\n      :data=\"data\"\r\n      :options=\"options\"\r\n      color=\"primary\"\r\n      :exports=\"true\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DataTable from \"../../../components/Elements/Datatable.vue\";\r\nimport { inject, onMounted, ref } from \"vue\";\r\nimport { GET, DELETE } from \"../../../services/api\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"users\",\r\n  components: {\r\n    DataTable,\r\n  },\r\n  setup() {\r\n    const headers = [\r\n      { key: \"ID\", value: \"id\" },\r\n      { key: \"Doador\", value: \"username\" },\r\n      { key: \"Documento\", value: \"document\", document: true },\r\n      { key: \"Data\", value: \"created_at\", date: true },\r\n      { key: \"Valor\", value: \"fixed_value\", money: true },\r\n      { \r\n        key: \"Status\", \r\n        value: \"status\", \r\n        badge: { \r\n          \"Ativa\": \"green\", \r\n          \"Inativa\": \"red\",\r\n        } \r\n      },\r\n      { key: \"Opções\", value: \"\" },\r\n    ];\r\n\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const modal = inject(\"modal\");\r\n    const alert = inject(\"alert\");\r\n    const loader = inject(\"loading\");\r\n    const data = ref([]);\r\n    const totalInfos = ref([]);\r\n    const status = ref([]);\r\n    const filtro = ref({\r\n      [\"orders_status_id\"]: \"1\",\r\n      [\"initial_date\"]: \"\",\r\n      [\"final_date\"]: \"\",\r\n    });\r\n\r\n    onMounted(async () => {\r\n      try {\r\n        loader.open();\r\n        data.value = await GET(\"donations\");\r\n        data.value.map((donation) => {\r\n            if (donation.users) {\r\n              donation.username = donation.users.name\r\n              donation.document = donation.users.document\r\n            }\r\n\r\n            donation.status === 'ACTIVE' ? donation.status = 'Ativa' : donation.status = 'Inativa';\r\n        });\r\n        loader.close();\r\n      } catch (e) {\r\n        loader.close();\r\n        if(e.includes(\"Token\")) {\r\n          alert.open(\"Atenção!\", e, \"danger\");\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('info');\r\n          router.push('/login');\r\n        } else {\r\n          alert.open(\"Atenção!\", e, \"danger\");\r\n        }\r\n      }\r\n    });\r\n\r\n    const deleteItem = (donation) => {\r\n      const deleteFunction = async function() {\r\n        loader.open();\r\n        try {\r\n          await DELETE(`donations/${donation.id}`);\r\n          data.value = await GET(\"donations\");\r\n          data.value.map((donation) => {\r\n              if (donation.users) {\r\n                donation.username = donation.users.name\r\n                donation.document = donation.users.document\r\n              }\r\n\r\n              donation.status === 'ACTIVE' ? donation.status = 'Ativa' : donation.status = 'Inativa';\r\n          });\r\n          loader.close();\r\n          alert.open(\"Sucesso!\", `Doação desativada com sucesso!`, \"success\");\r\n        } catch (e) {\r\n          loader.close();\r\n          alert.open(\"Erro\", e, \"danger\");\r\n        }\r\n      };\r\n\r\n      const cancelFunction = () => {\r\n        modal.close();\r\n      };\r\n\r\n      modal.open({\r\n        title: \"Atenção\",\r\n        message: \"Deseja realmente desativar essa doação?\",\r\n        confirmMessage: \"Sim\",\r\n        callbackOK: () => deleteFunction(),\r\n        callbackCancel: () => cancelFunction(),\r\n      });\r\n\r\n      loader.close();\r\n    };\r\n\r\n    const show = (donation) => {\r\n      window.open(`/adm/doadores/detalhes/${donation['users_id']}/editar/${donation.id}`);\r\n    };\r\n\r\n    const push = (r) => {\r\n      window.open(`/adm/doadores/detalhes/${r.users_id}`);\r\n    };\r\n\r\n    const options = [\r\n      { icon: \"user\", action: (param) => push(param), title: 'Detalhes do doador' },\r\n      { icon: \"pen\", action: (param) => show(param), title: 'Detalhes da doação' },\r\n      { icon: \"trash\", action: (param) => deleteItem(param), title: 'Desativar doação' },\r\n    ];\r\n\r\n    return {\r\n      headers,\r\n      data,\r\n      options,\r\n      route,\r\n      status,\r\n      totalInfos,\r\n      filtro,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=68cf4f90\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"sourceRoot":""}